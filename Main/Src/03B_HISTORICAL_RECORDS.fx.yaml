"'03B_HISTORICAL_RECORDS' As screen":
    Fill: =RGBA(237, 242, 242, 1)
    OnVisible: |-
        =UpdateContext({varAccionLoading:true});
        Reset(Accion_ActualRequest_Filter_Cb_RequestedBy_1);
        Reset(Accion_ActualRequest_Filter_Dtp_Date_1);
        Reset(NextRefresh_1);
        UpdateContext({varStartRefreshMode:true});
        UpdateContext({RefreshMode:DisplayMode.Edit});
        
        
        UpdateContext({varCurrentRequestFilter:false});
        Refresh('dsf.form_questions');
        Refresh('dsf.form_all_request_report');
        //Refresh('dsf.form_request_report');
        
        UpdateContext({varFormReportStatus: 0});
        Set(varCompleteReader,0);
        UpdateContext({varVisibleGrpFormRequest: false});
        
        //ClearCollect(RequestReport,fa_request_report.Run(varPlantId,Pr_FormNumber,0));
        Select(btn_UnlockForms_1);
        
        
        
        
        
        
        UpdateContext({StartTimer:true});
        UpdateContext({varCurrentRequestFilter:true});
        UpdateContext({varAccionLoading:false});

    Accion_ActualRequest_Shp_ActualRequestList_2 As htmlViewer:
        Height: |-
            =If(varCurrentRequestFilter,
            If(Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Y<>Accion_ActualRequest_Filter_Dtp_Date_1.Y,
            Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Height+Accion_ActualRequest_Filter_Dtp_Date_1.Height+50,Accion_ActualRequest_Filter_Dtp_Date_1.Height+50),0)
        HtmlText: |-
            ="<div style ='
            
              margin-top:0px;
              margin-bottom:3px;
              margin-left:0px;
              margin-right:0px;
              width: "& Accion_ActualRequest_Shp_ActualRequestList_2.Width &"px;
              height: "& Accion_ActualRequest_Shp_ActualRequestList_2.Height - 21 &"px;
              background-color: #F0F0F0;
              box-shadow: rgba(0, 0, 0, 0.15) 3px 6px 18px;'
              <center>
              </center>
              </div>
            "//rgba(203, 16, 18, 1)
        PaddingBottom: =0
        PaddingLeft: =0
        PaddingRight: =0
        PaddingTop: =0
        Visible: =varCurrentRequestFilter
        Width: =Accion_ActualRequest_Lbl_ActualRequest_1.Width
        X: =Accion_ActualRequest_Lbl_ActualRequest_1.X
        Y: =Accion_ActualRequest_Shp_ActualRequest_1.Y+Accion_ActualRequest_Shp_ActualRequest_1.Height
        ZIndex: =1

    Accion_ActualRequest_Filter_Cb_RequestedBy_1 As combobox:
        BorderColor: =RGBA(202, 202, 202, 1)
        ChevronBackground: =RGBA(149, 149, 149, 1)
        ChevronDisabledBackground: =RGBA(59, 165, 168, 1)
        ChevronHoverBackground: =RGBA(59, 165, 168, 1)
        DisplayFields: =["Result"]
        Font: ="Unity"
        Height: =53
        HoverFill: =RGBA(94, 186, 189, 1)
        InputTextPlaceholder: =First(collAppLanguage).Title3_MSG01
        Items: |-
            =ForAll(Distinct(Filter(
                'dsf.form_all_request_report',fr_form_number_vc=Hr_FormNumber,fr_planta_id_in=varPlantId),createdby_dispname), {Result: ThisRecord.Value})
        OnChange: =
        PressedFill: =RGBA(59, 165, 168, 1)
        Reset: =varFilterReset
        SearchFields: =["Result"]
        SearchItems: |-
            =Search(ForAll(Distinct(Filter('dsf.form_all_request_report',fr_form_number_vc=Hr_FormNumber,fr_planta_id_in=varPlantId),createdby_dispname),{Result:ThisRecord.Value}),Accion_ActualRequest_Filter_Cb_RequestedBy_1.SearchText,Result)
        SelectionFill: =RGBA(149, 149, 149, 1)
        SelectMultiple: =false
        Size: |-
            =//If(App.Width > 982,15,12)
            15
        Visible: |+
            =varCurrentRequestFilter 
            
        Width: |
            =If(
                App.Width > 5000, (Parent.Width * 0.8) / 10 - 5,
                App.Width > 4000, (Parent.Width * 0.8) / 9 - 5,
                App.Width > 3000, (Parent.Width * 0.8) / 8 - 5,
                App.Width > 2000, (Parent.Width * 0.8) / 7 - 5,
                App.Width > 1100, (Parent.Width * 0.8) / 5 - 5,
                App.Width > 982, (Parent.Width * 0.8) / 5 - 5,
                (Parent.Width * 0.8) / 3 - 5
            )
        X: |-
            =If(Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Visible,
            Accion_ActualRequest_Filter_Cb_ProcessOrder_3.X+Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Width+10,Accion_ActualRequest_Filter_Cb_ProcessOrder_3.X)
        Y: =Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Y
        ZIndex: =2

    Accion_ActualRequest_Filter_Cb_ProcessOrder_3 As combobox:
        BorderColor: =RGBA(202, 202, 202, 1)
        ChevronBackground: =RGBA(149, 149, 149, 1)
        ChevronDisabledBackground: =RGBA(59, 165, 168, 1)
        ChevronHoverBackground: =RGBA(59, 165, 168, 1)
        DisplayFields: =["Result"]
        Font: ="Unity"
        Height: =55
        HoverFill: =RGBA(94, 186, 189, 1)
        InputTextPlaceholder: |-
            =If(Hr_FormFrequency = "PO","PO:","CIP Object/Unique ID : ")
        Items: |-
            =ForAll(Distinct(Filter(
                'dsf.form_all_request_report',fr_form_number_vc=Hr_FormNumber,fr_planta_id_in=varPlantId),PO), {Result: ThisRecord.Value})
        OnChange: =
        PressedFill: =RGBA(59, 165, 168, 1)
        Reset: =varFilterReset
        SearchFields: =["Result"]
        SearchItems: |-
            =Search(ForAll(Distinct(Filter('dsf.form_all_request_report',fr_form_number_vc=Hr_FormNumber,fr_planta_id_in=varPlantId),PO),{Result:ThisRecord.Value}),Accion_ActualRequest_Filter_Cb_ProcessOrder_3.SearchText,Result)
        SelectionFill: =RGBA(149, 149, 149, 1)
        SelectMultiple: =false
        Size: =15
        Visible: =varCurrentRequestFilter /*&& Accion_ActualRequest_Filter_Cb_ProcessOrder.Width <= 250 */ && (Hr_FormFrequency = "PO" || "25975.2" in Hr_FormNumber || "26874.1" in Hr_FormNumber)
        Width: |
            =If(
                App.Width > 5000, (Parent.Width * 0.8) / 10 - 5,
                App.Width > 4000, (Parent.Width * 0.8) / 9 - 5,
                App.Width > 3000, (Parent.Width * 0.8) / 8 - 5,
                App.Width > 2000, (Parent.Width * 0.8) / 7 - 5,
                App.Width > 1100, (Parent.Width * 0.8) / 5 - 5,
                App.Width > 982, (Parent.Width * 0.8) / 5 - 5,
                (Parent.Width * 0.8) / 3 - 5
            )
        X: =Accion_ActualRequest_Lbl_ActualRequest_1.X+10
        Y: =Accion_ActualRequest_Shp_ActualRequestList_2.Y+10
        ZIndex: =4

    Accion_ActualRequest_Filter_Dtp_Date_1 As datepicker:
        BorderColor: =RGBA(149, 149, 149, 1)
        CalendarHeaderFill: =RGBA(3, 121, 137, 1)
        DefaultDate: =
        Font: ="Unity"
        Format: ="mm/dd/yyyy"//DateTimeFormat.ShortDate
        Height: =53
        HoverDateFill: =RGBA(16, 65, 71, 1)
        IconBackground: =RGBA(202, 202, 202, 1)
        InputTextPlaceholder: ="Date"
        Reset: =varFilterReset
        SelectedDateFill: =RGBA(3, 121, 137, 1)
        Size: =15
        Visible: |+
            =varCurrentRequestFilter 
            
        Width: |
            =If(
                App.Width > 5000, (Parent.Width * 0.8) / 10 - 5,
                App.Width > 4000, (Parent.Width * 0.8) / 9 - 5,
                App.Width > 3000, (Parent.Width * 0.8) / 8 - 5,
                App.Width > 2000, (Parent.Width * 0.8) / 7 - 5,
                App.Width > 1100, (Parent.Width * 0.8) / 5 - 5,
                App.Width > 982, (Parent.Width * 0.8) / 5 - 5,
                (Parent.Width * 0.8) / 3 - 5
            )
        X: |-
            =
            Accion_ActualRequest_Filter_Cb_RequestedBy_1.X+Accion_ActualRequest_Filter_Cb_RequestedBy_1.Width+10
        Y: =Accion_ActualRequest_Filter_Cb_RequestedBy_1.Y
        ZIndex: =5

    Label8_1 As label:
        Height: =70
        Size: =21
        Text: =Text(Year(Accion_ActualRequest_Filter_Dtp_Date_1.SelectedDate)*10000000000 + Month(Accion_ActualRequest_Filter_Dtp_Date_1.SelectedDate)*100000000 + Day(Accion_ActualRequest_Filter_Dtp_Date_1.SelectedDate) * 1000000)
        Visible: =false
        Width: =560
        X: =10
        Y: =934
        ZIndex: =6

    Accion_ActualRequest_Filter_Cb_ProcessOrder_2 As combobox:
        BorderColor: =RGBA(202, 202, 202, 1)
        ChevronBackground: =RGBA(149, 149, 149, 1)
        ChevronDisabledBackground: =RGBA(59, 165, 168, 1)
        ChevronHoverBackground: =RGBA(59, 165, 168, 1)
        DisplayFields: =["Result"]
        Font: ="Unity"
        Height: =55
        HoverFill: =RGBA(94, 186, 189, 1)
        InputTextPlaceholder: =""
        IsSearchable: =false
        Items: |-
            =ForAll(Distinct(RequestReport,PO), {Result: ThisRecord.Value})
        OnChange: =
        PressedFill: =RGBA(59, 165, 168, 1)
        SearchFields: =["Result"]
        SearchItems: =[]
        SelectionFill: =RGBA(149, 149, 149, 1)
        SelectMultiple: =false
        Size: =15
        Visible: |-
            =//!varCurrentRequestFilter && Self.Width > 250 && (Pr_FormFrequency = "PO" || "25975.2" in Pr_FormNumber || "26874.1" in Pr_FormNumber)
            false
        Width: =Accion_ActualRequest_Lbl_ActualRequest_1.Width * 0.20
        X: =Accion_ActualRequest_Icon_Filter_4.X - Self.Width - 20
        Y: =Accion_ActualRequest_Lbl_ActualRequest_1.Y + Accion_ActualRequest_Lbl_ActualRequest_1.Height/2 - Self.Height/2
        ZIndex: =24

    Accion_ActualRequest_1 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =28

        Accion_ActualRequest_Shp_ActualRequest_1 As htmlViewer:
            Height: =69
            HtmlText: |-
                ="<div style ='
                
                  margin-top:0px;
                  margin-bottom:3px;
                  margin-left:0px;
                  margin-right:0px;
                  width: "& Accion_ActualRequest_Shp_ActualRequest_1.Width &"px;
                  height: "& Accion_ActualRequest_Shp_ActualRequest_1.Height - 21 &"px;
                  background-color: #3BA5A8;
                  box-shadow: rgba(0, 0, 0, 0.15) 3px 6px 18px;'
                  <center>
                  </center>
                  </div>
                "//rgba(203, 16, 18, 1)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Width: =Parent.Width-20
            X: =10
            Y: =Accion_Header_Shp_NavBarTop_1.Y+Accion_Header_Shp_NavBarTop_1.Height+10
            ZIndex: =7

        Accion_ActualRequest_Lbl_ActualRequest_1 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =
            Height: =54
            OnSelect: =
            Size: =21
            Text: =First(collAppLanguage).'Left Button Screen 4' & " (" & CountRows(HR_AllRequestList.AllItems) & ")"
            Visible: =true//varIsFormType2
            Width: =Accion_ActualRequest_Shp_ActualRequest_1.Width
            X: =Accion_ActualRequest_Shp_ActualRequest_1.X
            Y: =Accion_ActualRequest_Shp_ActualRequest_1.Y
            ZIndex: =8

        "HR_AllRequestList As gallery.'BrowseLayout_Vertical_TwoTextVariant_ver4.0'":
            '#CopilotOverlayLabel': ="Filtered"
            BorderColor: =RGBA(166, 166, 166, 1)
            Height: =Parent.Height-Self.Y-10
            Items: |+
                =
                
                Sort(
                Filter(
                    'dsf.form_all_request_report',fr_form_number_vc=Hr_FormNumber,fr_planta_id_in=varPlantId,    createdby_dispname =  Accion_ActualRequest_Filter_Cb_RequestedBy_1.Selected.Result || IsBlank(Accion_ActualRequest_Filter_Cb_RequestedBy_1.Selected.Result),
                    fr_reportdate_in >= Value(Label8_1.Text),
                    fr_reportdate_in <= If(!IsBlank(Accion_ActualRequest_Filter_Dtp_Date_1.SelectedDate),Value(Label8_1.Text) + 999999,30000000000000),
                    PO = Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Selected.Result || IsBlank(Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Selected.Result),
                    PO = Accion_ActualRequest_Filter_Cb_ProcessOrder_2.Selected.Result || IsBlank(Accion_ActualRequest_Filter_Cb_ProcessOrder_2.Selected.Result))
                ,fa_report_date_dt,SortOrder.Descending)
                
            Layout: =Layout.Vertical
            TemplatePadding: =0
            TemplateSize: =If((Hr_FormFrequency = "PO" || "25975.2" in Hr_FormNumber || "26874.1" in Hr_FormNumber), 250,210)
            Width: =Parent.Width
            X: =10
            Y: =Accion_ActualRequest_Shp_ActualRequestList_2.Y+Accion_ActualRequest_Shp_ActualRequestList_2.Height+1
            ZIndex: =9

            Shp_BackgroudRequest_2 As htmlViewer:
                Fill: =RGBA(0, 0, 0, 0)
                Height: =Accion_ActualRequestList.TemplateHeight
                HtmlText: |-
                    ="<div style='margin:10px;width: " & Self.Width - 32 & "px;height:" & Self.Height - 35 & "px;opacity:0.8;background-color: " & If(ThisItem.fr_status_in = 2,"#FFFFFF","#FFFFFF") &" ;box-shadow:0 3px 6px 1px  #ccc; border-radius:30px'></div>"
                Width: =Accion_ActualRequestList.TemplateWidth - 5
                X: =5
                ZIndex: =1

            Lbl_RequestedBy_1 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                Color: =RGBA(40, 60, 97, 1)
                Font: =
                FontWeight: =FontWeight.Semibold
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: =First(collAppLanguage).Title3_MSG01
                VerticalAlign: =VerticalAlign.Top
                Width: =185
                Wrap: =false
                X: =Lbl_State_1.X + Lbl_State_1.Width + (Accion_ActualRequestList.TemplateWidth/620) * 20
                Y: =24
                ZIndex: =2

            Lbl_Date_3 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                Color: =RGBA(40, 60, 97, 1)
                Font: =
                FontWeight: =FontWeight.Semibold
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: =First(collAppLanguage).Subtitle3
                VerticalAlign: =VerticalAlign.Top
                Width: =185
                Wrap: =false
                X: =Lbl_RequestedBy_1.X
                Y: =102
                ZIndex: =3

            Btn_OpenRequest_2 As icon.ChevronRight:
                AccessibleLabel: =Self.Tooltip
                Color: =RGBA(59, 165, 168, 1)
                DisabledColor: =RGBA(202, 202, 202, 1)
                DisplayMode: |-
                    =If(
                        (ThisItem.fr_status_in = 2) Or ((ThisItem.fr_status_in = -1 Or ThisItem.fr_status_in = 0  Or  ThisItem.fr_status_in = 1) And ThisItem.fr_active_level=1) Or (( ThisItem.fr_status_in = 1 ||ThisItem.fr_status_in = 0) And !IsBlank(
                            Find(
                                Lower(User().Email),
                                LookUp(
                                    'dsf.form_level_desc',
                                    nu_form_number_vc = Hr_FormNumber And nu_plant_id_in = varPlantId And nu_user_level=ThisItem.fr_active_level
                                ).nu_users_email_tx
                            )
                        )) ,
                        DisplayMode.Edit,
                        DisplayMode.Disabled
                    )
                    /*If(
                        (ThisItem.fr_status_in = 2) Or (ThisItem.fr_status_in = -1) Or (ThisItem.fr_status_in = 0 And !IsBlank(
                            Find(
                                Lower(User().Email),
                                LookUp(
                                    'dsf.notify_users',
                                    nu_form_number_vc = Pr_FormNumber And nu_planta_id_in = varPlantId
                                ).nu_users_email_tx
                            )
                        )),
                        DisplayMode.Edit,
                        DisplayMode.Disabled
                    )*/
                FocusedBorderThickness: =0
                Height: =Accion_ActualRequestList.TemplateHeight
                Icon: |-
                    =If(
                        ThisItem.fr_status_in = 2,
                        Icon.CheckBadge,
                        If(
                            IsBlank(ThisItem.user_dispname_vc),
                            Icon.ChevronRight,
                            Icon.Lock
                        )
                    )
                OnSelect: |-
                    =UpdateContext({varAccionLoading:true});
                    If(ThisItem.fr_status_in = 2,Set(VarSavedTemplate,true),Set(VarSavedTemplate,false));
                    Set(varTimerReset,true);
                    Set(varTimerReset,false);
                    Set(varBackPopup,true);
                    Set(varItemStatus,ThisItem.fr_status_in);
                    Set(IsHRecord,true);
                    Set(varFormMode,FormMode.Edit);
                    //Refresh('dsf.form_request_report');
                    
                    Set(VarLoadPage,true);
                    If(IsBlank(ThisItem.usr_email_vc) Or Upper(ThisItem.usr_email_vc) = Upper(User().Email) Or 1=1,
                    //----------------------------------------------------------Copia el registro pendiente
                    UpdateContext({varFormReqItem: ThisItem});
                    //----------------------------------------------------------Indica la etapa del formulario (Emisor/Receptor)
                    
                    Set(varUserEmisorReceptor,true);
                    //----------------------------------------------------------Modo lectura cuando el formulario esta completado
                    Set(varCompleteReader,1);
                    //----------------------------------------------------------
                    UpdateContext(
                        {
                            varUpdateFR: nf_Update_Form_Requestv2.Run(
                                varFormReqItem.fr_planta_id_in,
                                varFormReqItem.fr_form_number_vc,
                                Text(
                                    varFormReqItem.fr_reportdate_dt,
                                    "yyyy-mm-dd hh:mm:ss.fff"
                                ),
                                varUserId,
                                1,
                                Text(Now(),"[$-es-ES]yyyy/mm/dd hh:mm:ss")
                            )
                        }
                    );
                    If(
                        !IsBlankOrError(varUpdateFR),
                        Notify(
                            First(collAppLanguage).Btn_LeftBtn_1_MSG01,
                            NotificationType.Success
                        );
                        ,
                        Notify(
                            First(collAppLanguage).Btn_LeftBtn_1_MSG02,
                            NotificationType.Error
                        )
                    );
                    UpdateContext({varVisibleGrpFormRequest: false});
                    Refresh('dsf.form_request');
                    //Refresh('dsf.form_request_report');
                    Refresh('dsf.answers_report');
                    UpdateContext(
                        {
                            varFormDesc: LookUp(
                                'dsf.form_library_counters',
                                fl_form_number_vc = varFormReqItem.fr_form_number_vc &&
                                fl_plant_id_in = varPlantId
                            ).fl_form_description_vc
                        }
                    );
                    UpdateContext(
                        {
                            varReportDate: Text(
                                varFormReqItem.fr_reportdate_dt,
                                "[$-es-ES]yyyy/mm/dd hh:mm:ss"
                            )
                        }
                    );
                    
                    
                    
                    
                    
                    Clear(Q11_TemporalPictures);
                    //Reset(Q14_QuestionAttachment);
                    Navigate(
                        '05_FORMULARIOS',
                        ScreenTransition.Fade,
                        {
                            Pr_FormDescription: varFormDesc,
                            Pr_FormNumber: varFormReqItem.fr_form_number_vc,
                            Pr_DateFilteDT: varReportDate,
                            Pr_DateFilterIn: Value(Year(DateValue(varReportDate)) * 10000000000 + Month(DateValue(varReportDate)) * 100000000 + Day(DateValue(varReportDate)) * 1000000 + Hour(DateTimeValue(varReportDate)) * 10000 + Minute(DateTimeValue(varReportDate)) * 100 + Second(DateTimeValue(varReportDate))),
                            Pr_ReviewMode: 0,
                            Pr_PartialRecord: 1
                        }
                    );
                    Clear(coltestanswere);
                    
                    ,Notify(First(collAppLanguage).Btn_OpenRequest & ThisItem.user_dispname_vc & ".",NotificationType.Error));
                    
                    UpdateContext({varAccionLoading:false});
                PaddingBottom: =10
                PaddingLeft: =10
                PaddingRight: =10
                PaddingTop: =10
                TabIndex: =0
                Visible: |
                    =true/*If(
                        ThisItem.fr_status_in <> 2 And ThisItem.fq_question_type_bt = 1 And !IsBlank(
                            Find(
                                Lower(User().Email),
                                LookUp(
                                    'dsf.notify_users',
                                    nu_form_number_vc = Pr_FormNumber And nu_planta_id_in = varPlantId
                                ).nu_users_email_tx
                            )
                        ),
                        true,
                        If(
                            ThisItem.fr_status_in <> 2 And ThisItem.fq_question_type_bt = 0,
                            true,
                            false
                        )
                    )*/
                Width: =65
                X: =Accion_ActualRequestList.Width - Self.Width - 20
                ZIndex: =4

            Lbl_PendingRequested_2 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                DisabledColor: =RGBA(40, 60, 97, 1)
                DisplayMode: =If(ThisItem.fr_status_in = 2,DisplayMode.Disabled,DisplayMode.Edit)
                Font: =
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: =ThisItem.createdby_dispname
                Tooltip: =Self.Text
                VerticalAlign: =VerticalAlign.Top
                Width: = Btn_OpenRequest_2.X - Self.X - 5
                Wrap: =false
                X: =Lbl_RequestedBy_1.X + Lbl_RequestedBy_1.Width + (Accion_ActualRequestList.TemplateWidth/620) * 10
                Y: =24
                ZIndex: =5

            Lbl_PendingDate_1 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                DisabledColor: =RGBA(40, 60, 97, 1)
                DisplayMode: =If(ThisItem.fr_status_in = 2,DisplayMode.Disabled,DisplayMode.Edit)
                Font: =
                Height: =32
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: |-
                    =Text(
                        DateTimeValue(ThisItem.fr_reportdate_dt),
                        "[$-en-US] mmm dd, yyyy hh:mm:ss"
                    )
                Tooltip: =Self.Text
                VerticalAlign: =VerticalAlign.Top
                Width: = Btn_OpenRequest_2.X - Self.X - 5
                Wrap: =false
                X: =Lbl_RequestedBy_1.X + Lbl_RequestedBy_1.Width - 5 + (Accion_ActualRequestList.TemplateWidth/620) * 10
                Y: =102
                ZIndex: =6

            Lbl_AquiredBy_1 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                Color: =RGBA(40, 60, 97, 1)
                Font: =
                FontWeight: =FontWeight.Semibold
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: =First(collAppLanguage).Title3_MSG02 
                VerticalAlign: =VerticalAlign.Top
                Width: =185
                Wrap: =false
                X: =Lbl_RequestedBy_1.X
                Y: =63
                ZIndex: =7

            Lbl_PendingAcquired_2 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                DisabledColor: =RGBA(40, 60, 97, 1)
                DisplayMode: =If(ThisItem.fr_status_in = 2,DisplayMode.Disabled,DisplayMode.Edit)
                Font: =
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: =If(IsBlank(ThisItem.user_dispname_vc),First(collAppLanguage).Lbl_PendingAcquired,ThisItem.user_dispname_vc)
                Tooltip: =Self.Text
                VerticalAlign: =VerticalAlign.Top
                Width: = Btn_OpenRequest_2.X - Self.X - 5
                Wrap: =false
                X: =Lbl_RequestedBy_1.X + Lbl_RequestedBy_1.Width + (Accion_ActualRequestList.TemplateWidth/620) * 10
                Y: =63
                ZIndex: =8

            Lbl_State_1 As label:
                Align: =Align.Center
                BorderColor: =RGBA(0, 0, 0, 1)
                Color: =If(ThisItem.fr_status_in = 0,RGBA(203, 102, 102, 1),RGBA(128, 128, 128, 1))
                Font: ="Unity"
                FontWeight: =FontWeight.Semibold
                Height: =15
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =8
                Text: ="Log"
                Visible: =false
                Width: =42
                X: =26
                Y: =148
                ZIndex: =9

            Img_ActualRequest_1 As image:
                Height: =86
                Image: =request
                OnSelect: =Select(Parent)
                Width: =75
                X: =5
                ZIndex: =10

            Btn_OpenRequest_3 As icon.ChevronRight:
                AccessibleLabel: =Self.Tooltip
                Color: =RGBA(59, 165, 168, 1)
                Fill: =RGBA(237, 237, 237, 1)
                FocusedBorderThickness: =0
                Height: =47
                Icon: =Icon.Settings
                OnSelect: |-
                    =UpdateContext({varRecordTrackingVisible:true});
                    ClearCollect(AnswerTracking,fa_answer_tracking_report.Run(ThisItem.fr_planta_id_in,ThisItem.fr_form_number_vc,ThisItem.fr_reportdate_in))
                PaddingBottom: =10
                PaddingLeft: =10
                PaddingRight: =10
                PaddingTop: =10
                TabIndex: =0
                Tooltip: ="Log"
                Width: =46
                X: =19
                Y: =90
                ZIndex: =11

            Lbl_Date_4 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                Color: =RGBA(40, 60, 97, 1)
                Font: =
                FontWeight: =FontWeight.Semibold
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: =First(collAppLanguage).Lbl_Date_1
                VerticalAlign: =VerticalAlign.Top
                Width: =185
                Wrap: =false
                X: =Lbl_RequestedBy_1.X
                Y: =143
                ZIndex: =12

            Lbl_PendingAcquired_3 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                DisabledColor: =RGBA(59, 165, 168, 1)
                DisplayMode: =If(ThisItem.fr_status_in = 2,DisplayMode.Disabled,DisplayMode.Edit)
                Font: =
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: |-
                    =//Switch(ThisItem.fr_status_in, 0, First(collAppLanguage).Sts_02,1, First(collAppLanguage).Sts_03,2,First(collAppLanguage).Sts_04)
                    If(ThisItem.fr_status_in<>2,"Pending by User "&ThisItem.fr_active_level,First(collAppLanguage).Sts_04)
                    //Switch(ThisItem.fr_status_in, -1,First(collAppLanguage).Sts_01, 0, First(collAppLanguage).Sts_02,1, First(collAppLanguage).Sts_03,2,First(collAppLanguage).Sts_04)-1=Pending by User01, 0=User 01 Completed, 1=User 02 In Progress, 2= Completed
                Tooltip: =Self.Text
                VerticalAlign: =VerticalAlign.Top
                Width: = Btn_OpenRequest_2.X - Self.X - 5
                Wrap: =false
                X: =Lbl_RequestedBy_1.X + Lbl_RequestedBy_1.Width + (Accion_ActualRequestList.TemplateWidth/620) * 10
                Y: =143
                ZIndex: =13

            Lbl_Date_5 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                Color: =RGBA(40, 60, 97, 1)
                Font: =
                FontWeight: =FontWeight.Bold
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: |-
                    =If(Hr_FormFrequency = "PO","PO:","CIP Object: ")
                VerticalAlign: =VerticalAlign.Top
                Visible: =(Hr_FormFrequency = "PO" || "25975.2" in Hr_FormNumber || "26874.1" in Hr_FormNumber)
                Width: =185
                Wrap: =false
                X: =Lbl_RequestedBy_1.X
                Y: =188
                ZIndex: =14

            Lbl_PendingRequested_3 As label:
                BorderColor: =RGBA(0, 0, 0, 1)
                DisabledColor: =RGBA(40, 60, 97, 1)
                DisplayMode: =If(ThisItem.fr_status_in = 2,DisplayMode.Disabled,DisplayMode.Edit)
                Font: =
                FontWeight: =FontWeight.Bold
                Height: =Self.Size * 1.8
                OnSelect: =Select(Parent)
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =18
                Text: =ThisItem.PO
                Tooltip: =Self.Text
                VerticalAlign: =VerticalAlign.Top
                Visible: =(Hr_FormFrequency = "PO" || "25975.2" in Hr_FormNumber || "26874.1" in Hr_FormNumber)
                Width: = Btn_OpenRequest_2.X - Self.X - 5
                Wrap: =false
                X: =Lbl_RequestedBy_1.X + Lbl_RequestedBy_1.Width + (Accion_ActualRequestList.TemplateWidth/620) * 10
                Y: =188
                ZIndex: =15

            icn_delete_request As icon.Trash:
                Color: =RGBA(255, 0, 0, 1)
                Height: =35
                Icon: =Icon.Trash
                OnSelect: |-
                    =UpdateContext({varLevel1User:Blank()});
                    If(!IBMS,UpdateContext({varLevel1User:
                    dsf_get_level1_user_details.Run(varPlantId,ThisItem.fr_form_number_vc,Text(
                                    ThisItem.fr_reportdate_dt,
                                    "yyyy-mm-dd hh:mm:ss.fff"
                                ))}));
                    If(IBMS || (varUserId=First(varLevel1User).sf_user_id_bin),
                    UpdateContext({varDeletePopup:true}),
                    Notify("You don't have sufficient rights to delete this",NotificationType.Warning))
                PaddingLeft: =10
                Width: =45
                X: =Btn_OpenRequest_3.X
                Y: =Btn_OpenRequest_3.Y+Btn_OpenRequest_3.Height+10
                ZIndex: =16

        Accion_ActualRequest_Icon_Filter_4 As icon.Filter:
            BorderColor: =RGBA(0, 0, 0, 0)
            Color: =RGBA(255, 255, 255, 1)
            FocusedBorderThickness: =0
            Height: =37
            Icon: =Icon.Filter
            OnSelect: |-
                =UpdateContext({varCurrentRequestFilter:!varCurrentRequestFilter})
            Tooltip: ="Pending Task"
            Visible: =true//If(CountRows(Accion_ActualRequestList.AllItems) = 0 Or IsBlankOrError(CountRows(Accion_ActualRequestList.AllItems)),false,true)
            Width: =59
            X: =Accion_ActualRequest_Shp_ActualRequest_1.Width-Self.Width-5
            Y: =Accion_ActualRequest_Shp_ActualRequest_1.Y+5
            ZIndex: =16

    Accion_Footer_Shp_ProgressBarUpdate_1 As rectangle:
        Fill: =RGBA(25, 178, 209, 1)
        Height: =5
        Width: =Parent.Width * (Accion_Other_Tmr_RefreshTimer_1.Value/Accion_Other_Tmr_RefreshTimer_1.Duration)
        Y: =Parent.Height - Accion_Footer_Shp_ProgressBarUpdate_1.Height
        ZIndex: =31

    Accion_Header_1 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =20
        ZIndex: =31

        Accion_Header_Shp_NavBarTop_1 As htmlViewer:
            Height: =202
            HtmlText: |-
                ="<div style ='
                
                  margin-top:0px;
                  margin-bottom:3px;
                  margin-left:0px;
                  margin-right:0px;
                  width: "& Accion_Header_Shp_NavBarTop_1.Width &"px;
                  height: "& Accion_Header_Shp_NavBarTop_1.Height - 21 &"px;
                  background-color: #3BA5A8;
                  box-shadow: rgba(0, 0, 0, 0.15) 3px 6px 18px;'
                  <center>
                  </center>
                  </div>
                "//rgba(203, 16, 18, 1)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Width: =Parent.Width
            ZIndex: =10

        Accion_Header_Btn_NotificationNav_1 As icon.Filter:
            BorderColor: =RGBA(0, 0, 0, 0)
            Color: =RGBA(255, 255, 255, 1)
            FocusedBorderThickness: =0
            Height: =49
            Icon: =Icon.Bell
            OnSelect: =Navigate('04_NOTIFICACIONES',ScreenTransition.Cover)
            Tooltip: ="Pending Task"
            Width: =59
            X: =Parent.Width - Self.Width - 30
            Y: =33
            ZIndex: =11

        Accion_Header_Lbl_ScreenTitle_1 As label:
            Color: =RGBA(255, 255, 255, 1)
            Font: =//"Arial Rounded MT"
            Height: =100
            Size: =28
            Text: ="Historical Requests "&Char(10)&"("&Hr_FormNumber&")"
            Width: =Parent.Width - Self.X-10
            X: =Accion_Header_Btn_ProfileNav_1.X
            Y: =Principal_Header_Lbl_ScreenSubTitle.Y - Self.Height+30
            ZIndex: =12

        Accion_Header_Btn_ProfileNav_1 As icon.Filter:
            BorderColor: =RGBA(0, 0, 0, 0)
            Color: =RGBA(255, 255, 255, 1)
            FocusedBorderThickness: =0
            Height: =49
            Icon: =Icon.ArrowLeft
            OnSelect: =Back()
            Width: =59
            X: =30
            Y: =33
            ZIndex: =13

        Accion_Header_Shp_PendingIndicator_1 As circle:
            BorderColor: =RGBA(220, 153, 153, 1)
            BorderThickness: =2
            Fill: =RGBA(203, 102, 102, 1)
            Height: =28
            OnSelect: =Navigate('04_NOTIFICACIONES',ScreenTransition.Cover)
            Visible: =If(TotalPending = 0 Or IsBlankOrError(TotalPending),false,true)
            Width: =28
            X: =Parent.Width - Self.Width - 30
            Y: =30
            ZIndex: =14

        Accion_Header_Lbl_PendingIndicator_1 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Font: =
            FontWeight: =FontWeight.Bold
            Height: =28
            OnSelect: =Navigate('04_NOTIFICACIONES',ScreenTransition.Cover)
            Size: =10
            Text: |-
                =//----------------------------------------------------------------------------------------------------MUESTRA CANTIDAD DE PENDIENTES
                If(TotalPending > 9,"+9",TotalPending)
            Visible: =If(TotalPending = 0 Or IsBlankOrError(TotalPending),false,true)
            Width: =28
            X: =Parent.Width - Self.Width - 30
            Y: =31
            ZIndex: =15

    Accion_AcquireForm_1 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =31

        Accion_AcquireForm_Shp_AcquireGrayBackground_1 As rectangle:
            DisabledFill: =Accion_AcquireForm_Shp_AcquireGrayBackground_1.Fill
            Fill: =RGBA(96, 96, 98, 0.64)
            FocusedBorderColor: =Accion_AcquireForm_Shp_AcquireGrayBackground_1.BorderColor
            Height: =Parent.Height
            HoverFill: =Accion_AcquireForm_Shp_AcquireGrayBackground_1.Fill
            PressedFill: =Accion_AcquireForm_Shp_AcquireGrayBackground_1.Fill
            Visible: =varVisibleGrpFormRequest
            Width: =Parent.Width
            ZIndex: =17

        Accion_AcquireForm_Shp_AcquireBackground_1 As htmlViewer:
            Fill: =RGBA(0, 0, 0, 0)
            Height: |
                =Accion_AcquireForm_Shp_AquireAccept_1.Y + Accion_AcquireForm_Shp_AquireAccept_1.Height - Self.Y +30
            HtmlText: |-
                ="<div style='margin:10px;width: " & Self.Width - 32 & "px;height:" & Self.Height - 35 & "px;opacity:1;background-color:#FFFFFF;box-shadow:0 3px 6px 1px  #ccc; border-radius:8px'></div>"
            Visible: =varVisibleGrpFormRequest
            Width: =Parent.Width * 0.9
            X: =(Parent.Width - Self.Width)/2
            Y: =Parent.Height/2 - 300
            ZIndex: =18

        Accion_AcquireForm_Shp_AquireAccept_1 As htmlViewer:
            Fill: =RGBA(0, 0, 0, 0)
            Height: =90
            HtmlText: |-
                ="<div style='margin:10px;width: " & Self.Width - 32 & "px;height:" & Self.Height - 35 & "px;opacity:0.8;background-color:#F0F0F0;box-shadow:0 3px 6px 1px  #ccc; border-radius:90px'></div>"
            OnSelect: =
            Visible: =varVisibleGrpFormRequest
            Width: =(Accion_AcquireForm_Shp_AcquireBackground_1.Width/2) *0.8
            X: =Accion_AcquireForm_Lbl_AcquireMessage_1.X
            Y: =Accion_AcquireForm_Lbl_AcquireMessage_1.Y + Accion_AcquireForm_Lbl_AcquireMessage_1.Height + 15
            ZIndex: =19

        Accion_AcquireForm_Lbl_AcquireMessage_1 As label:
            AutoHeight: =true
            Color: =RGBA(45, 45, 45, 1)
            FocusedBorderColor: =Accion_AcquireForm_Lbl_AcquireMessage_1.BorderColor
            Font: ="Unity"
            HoverBorderColor: =Accion_AcquireForm_Lbl_AcquireMessage_1.BorderColor
            HoverColor: =Accion_AcquireForm_Lbl_AcquireMessage_1.Color
            HoverFill: =Accion_AcquireForm_Lbl_AcquireMessage_1.Fill
            PressedBorderColor: =Accion_AcquireForm_Lbl_AcquireMessage_1.BorderColor
            PressedColor: =Accion_AcquireForm_Lbl_AcquireMessage_1.Color
            PressedFill: =Accion_AcquireForm_Lbl_AcquireMessage_1.Fill
            Size: =21
            Text: =First(collAppLanguage).lblDescription_3
            VerticalAlign: =VerticalAlign.Top
            Visible: =varVisibleGrpFormRequest
            Width: =Accion_AcquireForm_Shp_AcquireBackground_1.Width * 0.9
            X: =(Parent.Width - Self.Width)/2
            Y: =Accion_AcquireForm_Lbl_AcquireTitle_1.Y+Accion_AcquireForm_Lbl_AcquireTitle_1.Height + 15
            ZIndex: =20

        Accion_AcquireForm_Lbl_AcquireTitle_1 As label:
            Align: =Align.Center
            AutoHeight: =true
            FocusedBorderColor: =Accion_AcquireForm_Lbl_AcquireTitle_1.BorderColor
            Font: =
            FontWeight: =FontWeight.Bold
            Height: =43
            HoverBorderColor: =Accion_AcquireForm_Lbl_AcquireTitle_1.BorderColor
            HoverColor: =Accion_AcquireForm_Lbl_AcquireTitle_1.Color
            HoverFill: =Accion_AcquireForm_Lbl_AcquireTitle_1.Fill
            PressedBorderColor: =Accion_AcquireForm_Lbl_AcquireTitle_1.BorderColor
            PressedColor: =Accion_AcquireForm_Lbl_AcquireTitle_1.Color
            PressedFill: =Accion_AcquireForm_Lbl_AcquireTitle_1.Fill
            Size: =30
            Text: =First(collAppLanguage).lblTitle_3
            Visible: =varVisibleGrpFormRequest
            Width: =Accion_AcquireForm_Shp_AcquireBackground_1.Width * 0.9
            X: =(Parent.Width - Self.Width)/2
            Y: =Accion_AcquireForm_Shp_AcquireBackground_1.Y + 25
            ZIndex: =21

        Accion_AcquireForm_Shp_AcquireCancel_1 As htmlViewer:
            Fill: =RGBA(0, 0, 0, 0)
            Height: =90
            HtmlText: |-
                ="<div style='margin:10px;width: " & Self.Width - 32 & "px;height:" & Self.Height - 35 & "px;opacity:0.8;background-color:#F0F0F0;box-shadow:0 3px 6px 1px  #ccc; border-radius:90px'></div>"
            OnSelect: =
            Visible: =varVisibleGrpFormRequest
            Width: =(Accion_AcquireForm_Shp_AcquireBackground_1.Width/2) *0.8
            X: =Accion_AcquireForm_Lbl_AcquireMessage_1.X + Accion_AcquireForm_Lbl_AcquireMessage_1.Width - Self.Width
            Y: =Accion_AcquireForm_Lbl_AcquireMessage_1.Y + Accion_AcquireForm_Lbl_AcquireMessage_1.Height + 15
            ZIndex: =22

        Accion_AcquireForm_Btn_AcquireCancel_1 As label:
            Align: =Align.Center
            BorderColor: =RGBA(0, 0, 0, 0)
            Color: =RGBA(40, 60, 97, 1)
            Font: ="U"
            Height: =Accion_AcquireForm_Shp_AcquireCancel_1.Height
            OnSelect: |-
                =UpdateContext({varVisibleGrpFormRequest: false})
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =20
            Text: =First(collAppLanguage).Btn_RightBtn_3
            Visible: =varVisibleGrpFormRequest
            Width: =Accion_AcquireForm_Shp_AcquireCancel_1.Width
            X: =Accion_AcquireForm_Shp_AcquireCancel_1.X
            Y: =Accion_AcquireForm_Shp_AcquireCancel_1.Y
            ZIndex: =23

        Accion_AcquireForm_Btn_AcquireAccept_1 As label:
            Align: =Align.Center
            BorderColor: =RGBA(0, 0, 0, 0)
            Color: =RGBA(40, 60, 97, 1)
            Font: ="U"
            Height: =Accion_AcquireForm_Shp_AquireAccept_1.Height
            OnSelect: |
                =//----------------------------------------------------------Indica la etapa del formulario (Emisor/Receptor)
                If(varFormReqItem.fr_status_in = -1,
                Set(varUserEmisorReceptor,false),
                Set(varUserEmisorReceptor,true));
                
                
                UpdateContext(
                    {
                        varUpdateFR: nf_Update_Form_Requestv2.Run(
                            varFormReqItem.fr_planta_id_in,
                            varFormReqItem.fr_form_number_vc,
                            Text(
                                varFormReqItem.fr_reportdate_dt,
                                "yyyy-mm-dd hh:mm:ss.fff"
                            ),
                            varUserId,
                            1,
                            Text(Now(),"[$-es-ES]yyyy/mm/dd hh:mm:ss")
                        )
                    }
                );
                If(
                    !IsBlankOrError(varUpdateFR),
                    Notify(
                        First(collAppLanguage).Btn_LeftBtn_1_MSG01,
                        NotificationType.Success
                    );
                    ,
                    Notify(
                        First(collAppLanguage).Btn_LeftBtn_1_MSG02,
                        NotificationType.Error
                    )
                );
                UpdateContext({varVisibleGrpFormRequest: false});
                Refresh('dsf.form_request');
                //Refresh('dsf.form_request_report');
                Refresh('dsf.answers_report');
                UpdateContext(
                    {
                        varFormDesc: LookUp(
                            'dsf.form_library_counters',
                            fl_form_number_vc = varFormReqItem.fr_form_number_vc
                        ).fl_form_description_vc
                    }
                );
                UpdateContext(
                    {
                        varReportDate: Text(
                            varFormReqItem.fr_reportdate_dt,
                            "[$-es-ES]yyyy/mm/dd hh:mm:ss"
                        )
                    }
                );
                Navigate(
                    '05_FORMULARIOS',
                    ScreenTransition.Fade,
                    {
                        Pr_FormDescription: varFormDesc,
                        Pr_FormNumber: varFormReqItem.fr_form_number_vc,
                        Pr_DateFilteDT: varReportDate,
                        Pr_DateFilterIn: Value(Year(DateValue(varReportDate)) * 10000000000 + Month(DateValue(varReportDate)) * 100000000 + Day(DateValue(varReportDate)) * 1000000 + Hour(DateTimeValue(varReportDate)) * 10000 + Minute(DateTimeValue(varReportDate)) * 100 + Second(DateTimeValue(varReportDate))),
                        Pr_ReviewMode: 0,
                        Pr_PartialRecord: 1
                    }
                );
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =20
            Text: =First(collAppLanguage).Btn_LeftBtn_1
            Visible: =varVisibleGrpFormRequest
            Width: =Accion_AcquireForm_Shp_AquireAccept_1.Width
            X: =Accion_AcquireForm_Shp_AquireAccept_1.X
            Y: =Accion_AcquireForm_Shp_AquireAccept_1.Y
            ZIndex: =25

    Timer2_1 As timer:
        AutoPause: =false
        AutoStart: =true
        BorderColor: =RGBA(255, 191, 0, 1)
        Duration: =1000
        Height: =70
        OnTimerEnd: |-
            =If(Tick,UpdateContext({Tick:false}),UpdateContext({Tick:true}))
        Repeat: =true
        Text: =Text(Time(0, 0, Self.Value/1000), "ss")
        Visible: =false
        Width: =123
        X: =506
        Y: =295
        ZIndex: =32

    Accion_ActualRequest_Icon_Filter_3 As icon.Filter:
        BorderColor: =RGBA(0, 0, 0, 0)
        Color: =RGBA(255, 255, 255, 1)
        DisabledColor: =RGBA(202, 202, 202, 1)
        DisplayMode: =RefreshMode
        FocusedBorderThickness: =0
        Height: =40
        Icon: =Icon.Reload
        OnSelect: |
            =UpdateContext({varAccionLoading:true});
            UpdateContext({varStartRefreshMode:true});
            Refresh('dsf.form_all_request_report');
            Refresh('dsf.form_request');
            
            UpdateContext({varAccionLoading:false});
        Tooltip: ="Refresh"
        Visible: =true//If(CountRows(Accion_ActualRequestList.AllItems) = 0 Or IsBlankOrError(CountRows(Accion_ActualRequestList.AllItems)),false,true)
        Width: =50
        X: =Accion_ActualRequest_Lbl_ActualRequest_1.X + 20
        Y: =Accion_ActualRequest_Shp_ActualRequest_1.Y+5
        ZIndex: =33

    NextRefresh_1 As timer:
        Duration: =30000
        FontWeight: =FontWeight.Lighter
        Height: =49
        OnTimerEnd: |-
            =UpdateContext({RefreshMode:DisplayMode.Edit});
            UpdateContext({varStartRefreshMode:false});
        OnTimerStart: |-
            =UpdateContext({RefreshMode:DisplayMode.Disabled})
        Start: =varStartRefreshMode
        Text: =Text(Time(0, 0, Self.Value/1000), "ss")
        Visible: =false
        Width: =88
        X: =288
        Y: =10
        ZIndex: =34

    Accion_RecordTracking_1 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =34

        Accion_RecordTracking_Shp_SubBackground_1 As rectangle:
            Fill: =RGBA(237, 242, 242, 0.9)
            Height: =Parent.Height
            Visible: =varRecordTrackingVisible
            Width: =Parent.Width
            ZIndex: =26

        Accion_RecordTracking_Shp_Background_1 As htmlViewer:
            Fill: =RGBA(0, 0, 0, 0)
            Height: =Parent.Height - 30
            HtmlText: |-
                ="<div style='margin:10px;width: " & Self.Width - 32 & "px;height:" & Self.Height - 35 & "px;opacity:1;background-color:#FFFFFF;box-shadow:0 3px 6px 1px  #ccc; border-radius:10px'></div>"
            Visible: =varRecordTrackingVisible
            Width: =Parent.Width - 20
            X: =10
            Y: =15
            ZIndex: =27

        Accion_RecordTracking_Lbl_Title_1 As label:
            Align: =Align.Center
            Fill: =RGBA(43, 105, 107, 0.1)
            Font: =//"Arial Rounded MT"
            Height: =100
            Size: =32
            Text: =First(collAppLanguage).Accion_RecordTracking_Lbl_Title
            Visible: =varRecordTrackingVisible
            Width: =Parent.Width - 26 - Self.X
            X: =26
            Y: =29
            ZIndex: =28

        Accion_RecordTracking_Btn_Close_1 As icon.Add:
            Color: =RGBA(184, 0, 0, 1)
            Height: =41
            Icon: =Icon.CancelBadge
            OnSelect: |-
                =UpdateContext({varRecordTrackingVisible:false})
            Visible: =varRecordTrackingVisible
            Width: =34
            X: =Accion_RecordTracking_Lbl_Title_1.X + Accion_RecordTracking_Lbl_Title_1.Width - Self.Width - 10
            Y: =36
            ZIndex: =29

        Accion_RecordTracking_DataTable_1 As dataTable.datatable:
            BorderStyle: =BorderStyle.Solid
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(203, 241, 242, 0.05)
            Font: ="Unity"
            HeadingFill: =RGBA(59, 165, 168, 1)
            HeadingFont: ="Unity"
            HeadingSize: =18
            Height: =Accion_RecordTracking_Shp_Background_1.Height - Accion_RecordTracking_Shp_Background_1.Y  - Self.Y
            HoverFill: =RGBA(241, 244, 249, 1)
            Items: |-
                =SortByColumns(AnswerTracking,"fat_question_pos_in",SortOrder.Ascending)
                
                //Filter('dsf.form_answer_tracking_report',fat_report_date_in = Accion_ActualRequestList.Selected.fr_reportdate_in)
            NoDataText: =First(collAppLanguage).Accion_RecordTracking_DataTable
            SelectedFill: =RGBA(59, 165, 168, 0.17)
            Size: =14
            Visible: =varRecordTrackingVisible
            Width: =Accion_RecordTracking_Lbl_Title_1.Width - 20
            X: =Accion_RecordTracking_Lbl_Title_1.X + 10
            Y: =Accion_RecordTracking_Lbl_Title_1.Y + Accion_RecordTracking_Lbl_Title_1.Height + 10
            ZIndex: =30

            usr_email_vc_Column1_1 As dataTableColumn.emailColumn:
                AutoWidth: =false
                DisplayMode: =DisplayMode.Edit
                FieldDisplayName: =First(collAppLanguage).lan_usr_email_vc_column1
                FieldName: ="usr_email_vc"
                FieldVariantName: ="emailColumn"
                Height: =Parent.Height
                LayoutHeight: =Parent.Height
                Order: =2
                Text: =ThisItem.usr_email_vc
                Width: =325
                X: =215
                Y: =0
                ZIndex: =1

            fat_change_datetime_dt_Column2_1 As dataTableColumn.dateTimeColumn:
                AutoWidth: =false
                DisplayMode: =DisplayMode.Edit
                FieldDisplayName: =First(collAppLanguage).fat_change_datetime_dt_Column2
                FieldName: ="fat_change_datetime_dt"
                FieldVariantName: ="dateTimeColumn"
                Height: =Parent.Height
                LayoutHeight: =Parent.Height
                Order: =1
                Text: |-
                    =//Text(ThisItem.fat_change_datetime_dt,"[$-en-US] mmm dd, yyyy hh:mm:ss AM/PM")
                    Text(
                            DateAdd(ThisItem.fat_change_datetime_dt,0,TimeUnit.Minutes),
                            "[$-en-US] mmm dd, yyyy hh:mm:ss"
                        )
                Width: =300
                X: =0
                Y: =0
                ZIndex: =15

            fat_question_description_vc_Column2_1 As dataTableColumn.textualColumn:
                AutoWidth: =true
                DisplayMode: =DisplayMode.Edit
                FieldDisplayName: =First(collAppLanguage).fat_question_description_vc_Column2
                FieldName: ="fat_question_description_vc"
                FieldVariantName: ="textualColumn"
                Height: =Parent.Height
                LayoutHeight: =Parent.Height
                Order: =4
                Text: =ThisItem.fat_question_description_vc
                Width: =600
                X: =0
                Y: =0
                ZIndex: =16

            fat_question_answer_vc_Column2_1 As dataTableColumn.textualColumn:
                AutoWidth: =true
                DisplayMode: =DisplayMode.Edit
                FieldDisplayName: =First(collAppLanguage).fat_question_answer_vc_Column2
                FieldName: ="fat_question_answer_vc"
                FieldVariantName: ="textualColumn"
                Height: =Parent.Height
                LayoutHeight: =Parent.Height
                Order: =5
                Text: =ThisItem.fat_question_answer_vc
                Width: =1300
                X: =0
                Y: =0
                ZIndex: =17

            fat_question_pos_in_Column2_1 As dataTableColumn.numberColumn:
                AutoWidth: =false
                DisplayMode: =DisplayMode.Edit
                FieldDisplayName: |-
                    ="#"
                FieldName: ="fat_question_pos_in"
                FieldVariantName: ="numberColumn"
                Height: =Parent.Height
                LayoutHeight: =Parent.Height
                Order: =3
                Text: =ThisItem.fat_question_pos_in
                Width: =86
                X: =0
                Y: =0
                ZIndex: =18

            fat_record_type_vc_Column1_1 As dataTableColumn.textualColumn:
                AutoWidth: =false
                DisplayMode: =DisplayMode.Edit
                FieldDisplayName: =First(collAppLanguage).fat_record_type_vc_Column1
                FieldName: ="fat_record_type_vc"
                FieldVariantName: ="textualColumn"
                Height: =Parent.Height
                LayoutHeight: =Parent.Height
                Order: =7
                Text: =ThisItem.fat_record_type_vc
                Width: =100
                X: =0
                Y: =0
                ZIndex: =19

            fat_change_reason_vc_Column2_1 As dataTableColumn.textualColumn:
                AutoWidth: =false
                DisplayMode: =DisplayMode.Edit
                FieldDisplayName: =First(collAppLanguage).fat_change_reason_vc_Column2
                FieldName: ="fat_change_reason_vc"
                FieldVariantName: ="textualColumn"
                Height: =Parent.Height
                LayoutHeight: =Parent.Height
                Order: =6
                Text: =ThisItem.fat_change_reason_vc
                Width: =400
                X: =0
                Y: =0
                ZIndex: =20

    cont_Delete_PopUp As groupContainer.horizontalAutoLayoutContainer:
        Fill: =RGBA(0,0,0,0.4)
        Height: =App.Height
        LayoutAlignItems: =LayoutAlignItems.Center
        LayoutDirection: =LayoutDirection.Vertical
        LayoutJustifyContent: =LayoutJustifyContent.Center
        LayoutMode: =LayoutMode.Auto
        Visible: =varDeletePopup
        Width: =App.Width
        ZIndex: =37

        Container4_2 As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            BorderThickness: =1
            DropShadow: =DropShadow.Semibold
            Fill: =RGBA(255, 255, 255, 1)
            FillPortions: =0
            Height: =350
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutDirection: =LayoutDirection.Vertical
            LayoutJustifyContent: =LayoutJustifyContent.Center
            LayoutMinHeight: =112
            LayoutMinWidth: =200
            LayoutMode: =LayoutMode.Auto
            Width: =If(App.Width<=700,600,App.Width>700 &&App.Width<=1200,700,App.Width>1200,1200)
            ZIndex: =1

            Icon2_2 As icon.CancelBadge:
                AlignInContainer: =AlignInContainer.End
                Color: =RGBA(255, 0, 0, 0.59)
                Height: =70
                Icon: =Icon.CancelBadge
                OnSelect: |-
                    =UpdateContext({varDeletePopup:false})
                PaddingRight: =10
                PaddingTop: =10
                Width: =60
                ZIndex: =1

            Container5_2 As groupContainer.horizontalAutoLayoutContainer:
                Height: =225
                LayoutDirection: =LayoutDirection.Vertical
                LayoutMinHeight: =112
                LayoutMinWidth: =250
                LayoutMode: =LayoutMode.Auto
                ZIndex: =2

                Label9_2 As label:
                    Align: =Align.Center
                    AlignInContainer: =AlignInContainer.Center
                    FontWeight: =FontWeight.Bold
                    Height: =70
                    LayoutMinHeight: =70
                    LayoutMinWidth: =560
                    Size: =22
                    Text: ="Are You Sure?"
                    Width: =560
                    ZIndex: =1

                Label9_3 As label:
                    Align: =Align.Center
                    AlignInContainer: =AlignInContainer.Center
                    Color: =RGBA(255, 0, 0, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =70
                    LayoutMinHeight: =70
                    LayoutMinWidth: =560
                    Size: =22
                    Text: ="Do You Want to Delete this Request?"
                    Width: =560
                    ZIndex: =2

                Container7_2 As groupContainer.horizontalAutoLayoutContainer:
                    FillPortions: =0
                    Height: =225
                    LayoutGap: =60
                    LayoutJustifyContent: =LayoutJustifyContent.Center
                    LayoutMinHeight: =112
                    LayoutMinWidth: =250
                    LayoutMode: =LayoutMode.Auto
                    PaddingTop: =40
                    ZIndex: =3

                    btn_delete_deletepopup As button:
                        Fill: =RGBA(203, 102, 102, 1)
                        Height: =50
                        HoverFill: =ColorFade(Self.Fill, -20%)
                        LayoutMinHeight: =70
                        LayoutMinWidth: =280
                        OnSelect: |-
                            =UpdateContext({varResponse:
                            dsf_execute_sql_query.Run(
                                "update dsf.form_request
                            set fr_is_deleted=1
                            Where fr_planta_id_in="&varPlantId&" and fr_form_number_vc='"&Hr_FormNumber&"' and fr_reportdate_dt='"&Text(
                                        HR_AllRequestList.Selected.fr_reportdate_dt,
                                        "[$-es-ES]yyyy/mm/dd hh:mm:ss"
                                    )&"'"
                            )});
                            If(varResponse.response="Success",Notify("Request Deleted Successfully",NotificationType.Warning);UpdateContext({varAccionLoading:true});
                            UpdateContext({varStartRefreshMode:true});
                            Refresh('dsf.form_request');
                            Refresh('dsf.form_all_request_report');
                            UpdateContext({varAccionLoading:false});
                            UpdateContext({varDeletePopup:false})
                            ,Notify("Error! Please try later.",NotificationType.Warning))
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        Size: =18
                        Text: ="Delete"
                        Width: =180
                        ZIndex: =1

                    btn_Cancel_deletepopup As button:
                        Fill: |-
                            =ColorValue("#3BA5A8")
                        Height: =50
                        HoverFill: |-
                            =ColorFade(ColorValue("#3BA5A8"), -20%)
                        LayoutMinHeight: =70
                        LayoutMinWidth: =280
                        OnSelect: |-
                            =UpdateContext({varDeletePopup:false})
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        Size: =18
                        Text: ="Cancel"
                        Width: =180
                        ZIndex: =2

    btn_UnlockForms_1 As button:
        Height: =51
        OnSelect: |+
            =//ClearCollect(RequestReport,fa_request_report.Run(varPlantId,Hr_FormNumber));
            ClearCollect(col15minearlier,
            Filter(
            
                RequestReport,DateDiff(fr_assigned_dt,Now(),TimeUnit.Minutes)>15 && !IsBlank(user_dispname_vc) && fr_status_in <> 2 ));
            ForAll(col15minearlier As Record,fa_AnswerReport_Opt.Run(
                    Record.usr_email_vc,
                    "",
                    Record.fr_form_number_vc,
                    Record.fr_reportdate_dt,
                    99,
                    0, 
                    Text(Now(),"[$-es-ES]yyyy/mm/dd hh:mm:ss"),Record.fr_active_level,Record.fr_total_level
                );
            
            );
            ClearCollect(RequestReport,fa_request_report.Run(varPlantId,Hr_FormNumber,0));
            
        Size: =18
        Text: ="unlock forms"
        Visible: =false
        Width: =192
        X: =6
        Y: =440
        ZIndex: =38

    Accion_Other_Tmr_RefreshTimer_1 As timer:
        AutoPause: =false
        Duration: =15000
        Height: =49
        OnTimerEnd: |
            =//---------------------------------------------------------------------------------------------------------------------------------------- LISTA DE FORMULARIOS
            //---------------------------------------------------------------------------------------------------- REFRESCA TABLAS
            ClearCollect(RequestReport,fa_request_report.Run(varPlantId,Hr_FormNumber,0));
        OnTimerStart: =
        Text: =Text(Time(0, 0, Self.Value/1000), "ss")
        Visible: =false
        Width: =88
        X: =110
        Y: =36
        ZIndex: =39

    Accion_Loading_1 As Lir_Loading_1:
        Height: =Parent.Height
        IsLoading: =varAccionLoading
        Text: =First(collAppLanguage).LoadingText
        Visible: =Accion_Loading_1.IsLoading
        Width: =Parent.Width
        ZIndex: =41

    Grp_Clear_Filter_2 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =48

        Image1_2 As image:
            Height: =btn_clearFilter_2.Height
            Image: |-
                ="data:image/svg+xml;utf8, %3Csvg%20%20viewBox%3D%270%200%202048%202048%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%3Cpath%20d%3D%27M0%20128h2048v219l-768%20768v805H768v-805L0%20347V128zm1920%20165v-37H128v37l768%20768v731h256v-731l768-768zm37%20987l91%2091-230%20229%20230%20229-91%2091-229-230-229%20230-91-91%20230-229-230-229%2091-91%20229%20230%20229-230z%27%20fill%3D%27%23FFFFFF%27%3E%3C%2Fpath%3E%3C%2Fsvg%3E"
            Tooltip: ="Clear Filter"
            Visible: =!IsBlank(Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Selected.Result) || !IsBlank(Accion_ActualRequest_Filter_Dtp_Date_1.SelectedDate) ||  !IsBlank(Accion_ActualRequest_Filter_Cb_RequestedBy_1.Selected.Result)
            Width: =btn_clearFilter_2.Width
            X: =btn_clearFilter_2.X
            Y: =btn_clearFilter_2.Y
            ZIndex: =35

        btn_clearFilter_2 As button:
            Color: |-
                =ColorValue("#3BA5A8")
            Fill: =RGBA(0, 0, 0, 0)
            HoverFill: =Self.Fill
            OnSelect: |-
                =UpdateContext({varFilterReset:true});
                UpdateContext({varFilterReset:false})
            PressedFill: =Self.Fill
            Size: =14
            Text: =""
            Tooltip: ="Clear Filter"
            Visible: =!IsBlank(Accion_ActualRequest_Filter_Cb_ProcessOrder_3.Selected.Result) || !IsBlank(Accion_ActualRequest_Filter_Dtp_Date_1.SelectedDate) ||  !IsBlank(Accion_ActualRequest_Filter_Cb_RequestedBy_1.Selected.Result)
            Width: =50
            X: =Accion_ActualRequest_Icon_Filter_4.X-Self.Width-10
            Y: =Accion_ActualRequest_Icon_Filter_4.Y
            ZIndex: =36

